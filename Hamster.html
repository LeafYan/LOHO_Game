<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Hamster</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" media="screen" href="CSS/Hamster.css" />
	<script src="JS/Hamster.js"></script>
    <script src="main.js"></script>
    <script>
        var td = new Array();
		var playing = false;
		var score = 0;
		var countDown = 90;
		var interId = null,
			timeId = null;
		
		function GameStart(){
		playing = true;
		interId = setInterval("show()",1000);
		document.score.value=score;
		timeShow();
		}
			
		function timeShow(){
			document.time.value=countDown;
			if(countDown == 0)
				{
					GameOver();
					return;
				}
			else
				{
					countDown = countDown-1;
					timeId = setTimeout("timeShow()",1000);
				}
		}
		function timeStop(){
			clearInterval(interId);//clearInterval()方法返回setInterval()方法的id
			clearTimeout(timeId);//clearTime()方法返回setTimeout()的id
		}
			
		function show(){
			if(playing)
			{
				var current = Math.floor(Math.random()*9);
				document.getElementById("td["+current+"]").innerHTML = '<img src="遊戲畫面素材/地鼠1.png">';
				setTimeout("document.getElementById('td["+current+"]').innerHTML=''",1500);
			}
		}
		function clearMouse(){
			for(var i=0;i<=9;i++)
			{
				document.getElementById("td["+i+"]").innerHTML="";
			}
		}
		function hit(id){
			if(playing==false)
			{
				alert("請點擊開始遊戲");
				return;
			}
			else
			{	
				if(document.getElementById("td["+id+"]").innerHTML!="")
				{
					score += 1;
					document.score.value = score;
					document.getElementById("td["+id+"]").innerHTML="";
				}
				else
				{
					score += -1;
					document.score.value = score;
				}
			}
		}

		function GameOver(){
			timeStop();
			playing = false;
			clearMouse();
			alert("游戏结束！\n你获得的分数为："+score);
			score = 0;
			countDown = 90;
		}
    </script>
</head>
<body>
    <div class="content">
        <div class="title">
			<div class="box">
				<label>時間:</label>
				<input type="text" name="time" size="10">
			</div>
			<div class="box">
				<label>分數：</label>
				<input type="text" name="score" size="10">
			</div>
			<div class="box">
				<button value="Ready" onclick="GameStart()">開始遊戲</button>
			</div>
        </div>
    </div>
        <div class="table">
            <table>
                <tr>
                    <td id="td[0]" onclick="hit(0)"></td>
                    <td id="td[1]" onclick="hit(1)"></td>
                    <td id="td[2]" onclick="hit(2)"></td>
                </tr>
                <tr>
                    <td id="td[3]" onclick="hit(3)"></td>
                    <td id="td[4]" onclick="hit(4)"></td>
                    <td id="td[5]" onclick="hit(5)"></td>
                </tr>
                <tr>
                    <td id="td[6]" onclick="hit(6)"></td>
                    <td id="td[7]" onclick="hit(7)"></td>
                    <td id="td[8]" onclick="hit(8)"></td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>